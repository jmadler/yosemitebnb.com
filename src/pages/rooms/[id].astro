---
import Layout from '../../layouts/Layout.astro';
import { rooms } from '../../data/rooms';

interface Room {
    id: string;
    price: string;
    description: string;
    images: string[];
    capacity: string;
    amenities: string[];
    rating: string;
    airbnbUrl?: string;
}

export function getStaticPaths() {
    return Object.values(rooms).map((room: Room) => ({
        params: { id: room.id },
        props: { room },
    }));
}

const { room } = Astro.props;
---

<Layout 
  title={`${room.id} - The Getaway Yosemite`}
  meta={{
    description: `${room.id} room at The Getaway Yosemite BnB`,
    keywords: `Yosemite lodging, ${room.id}, BnB room`,
    image: room.images[0],
    url: `https://yosemitebnb.com/rooms/${room.id}`,
    structuredData: {
      "@context": "https://schema.org",
      "@type": "Room",
      "name": room.id,
      "image": room.images[0],
      "description": room.description
    }
  }}
>
    <main>
        <div class="room-details">
            <div class="image-gallery">
                {room.images.map((image: string) => (
                    <img src={image} alt={room.id} />
                ))}
            </div>

            <div class="room-info">
                <h1>{room.id}</h1>
                <p class="price">{room.price}/night</p>
                <p class="rating">â˜…{room.rating}</p>
                <p class="capacity">{room.capacity}</p>
                <p class="description">{room.description}</p>

                <div class="amenities">
                    <h2>Amenities</h2>
                    <ul>
                        {room.amenities.map((amenity: string) => (
                            <li>{amenity}</li>
                        ))}
                    </ul>
                </div>

                <a href={room.airbnbUrl} class="book-button" target="_blank" rel="noopener noreferrer">
                    Book on Airbnb
                </a>
            </div>
        </div>
    </main>
</Layout>

<style>
    .room-details {
        max-width: 1200px;
        margin: 2rem auto;
        padding: 0 1rem;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }

    .image-gallery {
        display: grid;
        gap: 1rem;
    }

    .image-gallery img {
        width: 100%;
        height: auto;
        border-radius: 8px;
        object-fit: cover;
    }

    .room-info {
        padding: 1rem;
    }

    h1 {
        font-size: 2.5rem;
        color: var(--text);
        margin-bottom: 1rem;
    }

    .price {
        font-size: 1.5rem;
        color: var(--accent);
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .rating {
        font-size: 1.5rem;
        color: var(--accent);
        font-weight: 600;
        margin-bottom: 0.5rem;
    }

    .capacity {
        color: var(--text);
        margin-bottom: 1.5rem;
    }

    .description {
        margin-bottom: 2rem;
        line-height: 1.6;
    }

    .amenities {
        margin-bottom: 2rem;
    }

    .amenities h2 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    .amenities ul {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 0.5rem;
        list-style: none;
        padding: 0;
    }

    .amenities li {
        padding: 0.5rem;
        background: var(--background);
        border-radius: 4px;
    }

    .book-button {
        display: inline-block;
        background: var(--accent);
        color: white;
        padding: 1rem 2rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        transition: background-color 0.2s;
    }

    .book-button:hover {
        background: var(--accent-light);
    }

    @media (max-width: 768px) {
        .room-details {
            grid-template-columns: 1fr;
        }
    }
</style> 